<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <title>amis demo</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
    />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <link rel="stylesheet" href="sdk.css" />
    <link rel="stylesheet" href="helper.css" />
    <link rel="stylesheet" href="iconfont.css" />
    <!-- 这是默认主题所需的，如果是其他主题则不需要 -->
    <!-- 从 1.1.0 开始 sdk.css 将不支持 IE 11，如果要支持 IE11 请引用这个 css，并把前面那个删了 -->
    <!-- <link rel="stylesheet" href="sdk-ie11.css" /> -->
    <!-- 不过 amis 开发团队几乎没测试过 IE 11 下的效果，所以可能有细节功能用不了，如果发现请报 issue -->
    <style>
      html,
      body,
      .app-wrapper {
        position: relative;
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body>
    <div id="root" class="app-wrapper"></div>
    <script src="sdk.js"></script>
    <script type="text/javascript">
      (function () {
        let amis = amisRequire('amis/embed');
        // 通过替换下面这个配置来生成不同页面
        let amisJSON = {
              "type": "page",
              "title": "列表",
              "remark": null,
              "name": "page-demo",
              "toolbar": [
                  {
                      "type": "button",
                      "actionType": "link",
                      "link": "/crud/new",
                      "label": "新增",
                      "primary": true,
                      "id": "u:d4cb0a019fcd"
                  }
              ],
              "body": [
                  {
                      "type": "crud",
                      "name": "sample",
                      "api": {
                          "method": "post",
                          "url": "https://localhost:44301/home/CommonQuery?type=测试&queryType=queryAll&qc1=${qc1}&qc2=${qc2}",
                          "messages": {},
                          "requestAdaptor": "",
                          "adaptor": "",
                          "dataType": "form",
                          "headers": {
                              "Content-Type": "text/plain"
                          }
                      },
                      "filter": {
                          "id": "u:2efe6dee746f",
                          "type": "form",
                          "title": "查询条件",
                          "mode": "horizontal",
                          "dsType": "api",
                          "feat": "Insert",
                          "body": [
                              {
                                  "type": "grid",
                                  "columns": [
                                      {
                                          "body": [
                                              {
                                                  "name": "qc1",
                                                  "label": "门店名",
                                                  "type": "input-text",
                                                  "id": "u:1aa018a71024"
                                              }
                                          ],
                                          "id": "u:3305c2cae252"
                                      },
                                      {
                                          "body": [
                                              {
                                                  "name": "qc2",
                                                  "label": "药店ID",
                                                  "type": "input-text",
                                                  "id": "u:8d25ad2844d6"
                                              }
                                          ],
                                          "id": "u:bd9b1c9719c7"
                                      }
                                  ],
                                  "id": "u:ff5acee2f1cd"
                              }
                          ],
                          "actions": [
                              {
                                  "type": "reset",
                                  "label": "重置",
                                  "id": "u:3a307a07d7db"
                              },
                              {
                                  "type": "submit",
                                  "label": "查询",
                                  "id": "u:44aaf4c9f725",
                                  "level": "primary"
                              }
                          ],
                          "resetAfterSubmit": false
                      },
                      "bulkActions": [
                          {
                              "label": "批量删除",
                              "type": "button",
                              "id": "u:a773451e1e5f",
                              "confirmText": "确定要删除这些数据吗?",
                              "themeCss": {
                                  "className": {
                                      "background:default": "#e10e0e",
                                      "font:default": {
                                          "color": "#fafafa"
                                      }
                                  }
                              },
                              "actionType": "ajax",
                              "api": {
                                  "method": "post",
                                  "url": "https://localhost:44301/home/CommonEdit?type=测试&editType=batchDel",
                                  "data": {
                                      "key": "${ids|raw}"
                                  },
                                  "adaptor": "",
                                  "dataType": "json"
                              }
                          }
                      ],
                      "columns": [
                          {
                              "name": "门店",
                              "label": "门店",
                              "sortable": false,
                              "id": "u:7d76c1d2e873",
                              "placeholder": "-"
                          },
                          {
                              "name": "账号",
                              "label": "账号",
                              "sortable": false,
                              "id": "u:60bd7b859187",
                              "placeholder": "-",
                              "width": ""
                          },
                          {
                              "label": "门店平安好医生ID",
                              "placeholder": "-",
                              "id": "u:60bd7b859188",
                              "name": "门店平安好医生ID",
                              "sortable": false
                          },
                          {
                              "label": "区域编号",
                              "placeholder": "-",
                              "id": "u:60bd7b859189",
                              "name": "区域编号",
                              "sortable": false
                          },
                          {
                              "label": "大药房ID",
                              "placeholder": "-",
                              "id": "u:60bd7b859110",
                              "name": "大药房ID",
                              "sortable": false
                          },
                          {
                              "type": "operation",
                              "label": "操作",
                              "width": "",
                              "buttons": [
                                  {
                                      "type": "button",
                                      "label": "",
                                      "onEvent": {
                                          "click": {
                                              "actions": []
                                          }
                                      },
                                      "id": "u:18f345e05340",
                                      "icon": "fa fa-eye",
                                      "tooltip": "查看其他信息"
                                  },
                                  {
                                      "type": "button",
                                      "icon": "fa fa-eye",
                                      "actionType": "dialog",
                                      "tooltip": "查看门店任务",
                                      "dialog": {
                                          "title": "查看",
                                          "body": [
                                              {
                                                  "type": "form",
                                                  "body": [
                                                      {
                                                          "type": "static",
                                                          "name": "大药房ID",
                                                          "label": "大药房ID",
                                                          "id": "u:95679ba2725d",
                                                          "labelAlign": "left"
                                                      },
                                                      {
                                                          "type": "divider",
                                                          "id": "u:38def3802cc8"
                                                      },
                                                      {
                                                          "type": "static",
                                                          "name": "门店",
                                                          "label": "门店",
                                                          "id": "u:080d8d82d837",
                                                          "labelAlign": "left"
                                                      },
                                                      {
                                                          "type": "divider",
                                                          "id": "u:e6779483372f"
                                                      },
                                                      {
                                                          "type": "static",
                                                          "name": "主推任务",
                                                          "label": "主推任务",
                                                          "id": "u:1543c53037db",
                                                          "labelAlign": "left"
                                                      },
                                                      {
                                                          "type": "divider",
                                                          "id": "u:fb3fb7811715"
                                                      },
                                                      {
                                                          "type": "static",
                                                          "name": "眼镜任务",
                                                          "label": "眼镜任务",
                                                          "id": "u:3908dd8d2a38",
                                                          "labelAlign": "left"
                                                      },
                                                      {
                                                          "type": "divider",
                                                          "id": "u:1030ba763c29"
                                                      },
                                                      {
                                                          "type": "static",
                                                          "name": "重点供应商任务",
                                                          "label": "重点供应商任务",
                                                          "id": "u:89a35ba49c33",
                                                          "labelAlign": "left"
                                                      },
                                                      {
                                                          "type": "divider",
                                                          "id": "u:b6407a5d6c40"
                                                      },
                                                      {
                                                          "type": "static",
                                                          "name": "片区",
                                                          "label": "片区",
                                                          "id": "u:21e3a374d969",
                                                          "labelAlign": "left"
                                                      },
                                                      {
                                                          "type": "divider",
                                                          "id": "u:18584d0407eb"
                                                      },
                                                      {
                                                          "type": "static",
                                                          "name": "纯销售任务",
                                                          "label": "纯销售任务",
                                                          "id": "u:21e3a374d969",
                                                          "labelAlign": "left"
                                                      },
                                                      {
                                                          "type": "divider",
                                                          "id": "u:18584d0407eb"
                                                      }
                                                  ],
                                                  "id": "u:9abaa18a6f95",
                                                  "actions": [
                                                      {
                                                          "type": "submit",
                                                          "label": "提交",
                                                          "primary": true
                                                      }
                                                  ],
                                                  "feat": "View",
                                                  "dsType": "api",
                                                  "initApi": "https://localhost:44301/home/CommonQuery?type=测试&queryType=queryDetailByKey&qc1=${大药房ID}",
                                                  "mode": "horizontal"
                                              }
                                          ],
                                          "id": "u:83bd978c0e2d",
                                          "actions": [
                                              {
                                                  "type": "button",
                                                  "actionType": "cancel",
                                                  "label": "取消",
                                                  "id": "u:f41a442f0664"
                                              },
                                              {
                                                  "type": "button",
                                                  "actionType": "confirm",
                                                  "label": "确定",
                                                  "primary": true,
                                                  "id": "u:c382dfae2f17"
                                              }
                                          ]
                                      },
                                      "id": "u:750deb843cdf"
                                  },
                                  {
                                      "type": "button",
                                      "icon": "fa fa-pencil",
                                      "tooltip": "编辑",
                                      "actionType": "drawer",
                                      "drawer": {
                                          "position": "left",
                                          "size": "lg",
                                          "title": "编辑",
                                          "body": {
                                              "type": "form",
                                              "name": "sample-edit-form",
                                              "api": "https://localhost:44301/home/CommonEdit?key1=${大药房ID}&type=测试&editType=updateByKey",
                                              "body": [
                                                  {
                                                      "type": "input-text",
                                                      "name": "门店",
                                                      "label": "门店",
                                                      "required": true
                                                  },
                                                  {
                                                      "type": "divider"
                                                  },
                                                  {
                                                      "type": "input-text",
                                                      "name": "区域编号",
                                                      "label": "区域编号",
                                                      "required": true
                                                  },
                                                  {
                                                      "type": "divider"
                                                  }
                                              ]
                                          }
                                      },
                                      "id": "u:f31767428208"
                                  },
                                  {
                                      "type": "button",
                                      "icon": "fa fa-times text-danger",
                                      "actionType": "ajax",
                                      "tooltip": "删除",
                                      "confirmText": "您确认要删除?",
                                      "api": "delete:/amis/api/sample/$id",
                                      "id": "u:a41b85469684"
                                  }
                              ],
                              "placeholder": "-",
                              "fixed": "right",
                              "id": "u:a47bead04fdb"
                          }
                      ],
                      "affixHeader": true,
                      "columnsTogglable": "auto",
                      "placeholder": "暂无数据",
                      "tableClassName": "table-db table-striped",
                      "headerClassName": "crud-table-header",
                      "footerClassName": "crud-table-footer",
                      "toolbarClassName": "crud-table-toolbar",
                      "combineNum": 0,
                      "bodyClassName": "panel-default",
                      "id": "u:42afcc4f83b3",
                      "perPageAvailable": [
                          10,
                          20,
                          50,
                          100
                      ],
                      "messages": {},
                      "primaryField": "大药房ID",
                      "filterTogglable": false,
                      "footerToolbar": [
                          {
                              "type": "statistics",
                              "align": "left"
                          },
                          {
                              "type": "pagination",
                              "align": "right"
                          },
                          {
                              "type": "switch-per-page",
                              "tpl": "内容",
                              "wrapperComponent": "",
                              "id": "u:a699fcc48f11",
                              "align": "left"
                          }
                      ],
                      "alwaysShowPagination": true,
                      "autoJumpToTopOnPagerChange": true,
                      "autoFillHeight": true,
                      "headerToolbar": [
                          "bulkActions"
                      ]
                  }
              ],
              "id": "u:4c6e0e44c089"
          };
        let amisScoped = amis.embed('#root', amisJSON, {
          data: {
            myData: 'amis'
          },
          context: {
            amisUser: {
              id: 1,
              name: 'test user'
            }
          }
        });
      })();
    </script>
  </body>
</html>